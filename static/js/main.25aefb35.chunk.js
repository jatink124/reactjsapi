(this["webpackJsonpreact-jsonserver"]=this["webpackJsonpreact-jsonserver"]||[]).push([[0],{24:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n.n(s),r=n(18),a=n.n(r),i=(n(24),n(3)),l=n(6),o=n(5),u=n(4),d=c.a.createContext(),h=d.Provider,j=n(0),b=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).handleUpdate=function(t){e.context.handleUpdate(t,e.name.value,e.email.value)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.context.get_users()}},{key:"render",value:function(){var e,t,n=this;return e=this.context.all_users.map((function(e){var t=e.id,s=e.user_name,c=e.user_email;return!0===e.isEditing?Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:Object(j.jsx)("input",{className:"form-control",type:"text",ref:function(e){return n.name=e},defaultValue:s})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{className:"form-control",type:"email",ref:function(e){return n.email=e},defaultValue:c})}),Object(j.jsxs)("td",{children:[Object(j.jsx)("button",{className:"btn btn-success mr-2",onClick:function(){return n.handleUpdate(t)},children:"Save"}),Object(j.jsx)("button",{onClick:function(){return n.context.cancelEdit(t)},className:"btn btn-light",children:"Cancel"})]})]},t):Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:s}),Object(j.jsx)("td",{children:c}),Object(j.jsxs)("td",{children:[Object(j.jsx)("button",{className:"btn btn-dark mr-2",onClick:function(){return n.context.editMode(t)},children:"Edit"}),Object(j.jsx)("button",{onClick:function(){return n.context.handleDelete(t)},className:"btn btn-danger",children:"Delete"})]})]},t)})),t=this.context.all_users.length>0?Object(j.jsxs)("table",{className:"table table-striped table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Name"}),Object(j.jsx)("th",{children:"Email"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:e})]}):Object(j.jsxs)("div",{className:"alert alert-light",role:"alert",children:[Object(j.jsx)("h4",{className:"alert-heading",children:"No User Found!"}),Object(j.jsx)("hr",{}),Object(j.jsx)("p",{children:"Please Insert Some Users."})]}),Object(j.jsx)(j.Fragment,{children:t})}}]),n}(s.Component);b.contextType=d;var m=b,p=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).insertUser=function(t){e.context.insertUser(t,e.username.value,e.useremail.value)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsx)("form",{onSubmit:this.insertUser,children:Object(j.jsxs)("div",{className:"form-row",children:[Object(j.jsxs)("div",{className:"form-group col-sm-6",children:[Object(j.jsx)("label",{className:"font-weight-bold",children:"Name"}),Object(j.jsx)("input",{type:"text",name:"username",ref:function(t){return e.username=t},className:"form-control",placeholder:"Name"})]}),Object(j.jsxs)("div",{className:"form-group col-sm-6",children:[Object(j.jsx)("label",{className:"font-weight-bold",children:"Email"}),Object(j.jsx)("input",{type:"email",name:"useremail",ref:function(t){return e.useremail=t},className:"form-control",placeholder:"Email"})]}),Object(j.jsx)("div",{className:"form-group col-sm-12 text-right",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add user"})})]})})}}]),n}(s.Component);p.contextType=d;var f=p,x=n(19),O=n(8),v=n(7),g=n.n(v),N=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e={all_users:this.state.users,get_users:this.fetchUsers,editMode:this.editMode,cancelEdit:this.cancelEdit,handleUpdate:this.handleUpdate,handleDelete:this.handleDelete,insertUser:this.insertUser};return Object(j.jsx)(h,{value:e,children:Object(j.jsx)("div",{className:"container-fluid bg-light",children:Object(j.jsx)("div",{className:"container p-5",children:Object(j.jsxs)("div",{className:"card shadow-sm",children:[Object(j.jsx)("h1",{className:"card-header text-center text-uppercase text-muted",children:"React PHP CRUD Application"}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-4",children:Object(j.jsx)(f,{})}),Object(j.jsx)("div",{className:"col-md-8",children:Object(j.jsx)(m,{})})]})})]})})})})}}]),n}(function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={users:[]},e.fetchUsers=function(){g.a.get("https://www.catchmyjob.in/php-react/all-users.php").then((function(t){var n=t.data;1===n.success&&e.setState({users:n.users.reverse()})})).catch((function(e){console.log(e)}))},e.editMode=function(t){var n=e.state.users.map((function(e){return e.id===t?(e.isEditing=!0,e):(e.isEditing=!1,e)}));e.setState({users:n})},e.cancelEdit=function(t){var n=e.state.users.map((function(e){return e.id===t?(e.isEditing=!1,e):e}));e.setState({users:n})},e.handleUpdate=function(t,n,s){g.a.post("https://www.catchmyjob.in/php-react/update-user.php",{id:t,user_name:n,user_email:s}).then((function(c){var r=c.data;if(1===r.success){var a=e.state.users.map((function(e){return e.id===t?(e.user_name=n,e.user_email=s,e.isEditing=!1,e):e}));e.setState({users:a})}else alert(r.msg)})).catch((function(e){console.log(e)}))},e.handleDelete=function(t){var n=e.state.users.filter((function(e){return e.id!==t}));g.a.post("https://www.catchmyjob.in/php-react/delete-user.php",{id:t}).then((function(t){var s=t.data;1===s.success?e.setState({users:n}):alert(s.msg)})).catch((function(e){console.log(e)}))},e.insertUser=function(t,n,s){t.preventDefault(),t.persist(),g.a.post("https://www.catchmyjob.in/php-react/add_user.php",{user_name:n,user_email:s}).then(function(e){var c=e.data;1===c.success?(this.setState({users:[{id:c.id,user_name:n,user_email:s}].concat(Object(x.a)(this.state.users))}),t.target.reset()):alert(c.msg)}.bind(Object(O.a)(e))).catch((function(e){console.log(e)}))},e}return n}(c.a.Component)),y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),r(e),a(e)}))};a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(N,{})}),document.getElementById("root")),y()}},[[44,1,2]]]);
//# sourceMappingURL=main.25aefb35.chunk.js.map